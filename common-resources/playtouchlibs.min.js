(function(){var t="1.7.1",e="PLib",i={version:"1.0.0",tag:"TP",toLower:function(t){return(t+"").toLocaleLowerCase()},toUpper:function(t){return(t+"").toLocaleUpperCase()},UCFirst:function(t){return(t+"").charAt(0).toLocaleUpperCase()+(t+"").slice(1)}};i.Capitalize=i.UCFirst,i.UCWords=function(t){return(t+"").replace(/^(.)|\s+(.)/g,function(t){return(t+"").toLocaleUpperCase()})},i.localeNumber=function(t){return(new Intl.NumberFormat).format(parseInt(t))};var r=function(t,e){var r=e.split("|"),n=r.pop();for(n="string"==typeof this[n]?this[n]:"string"==typeof this.__defaultValue?this.__defaultValue:"";r.length;){var o=r.pop();"function"==typeof i[o]?n=i[o](n):"function"==typeof window[o]&&(n=window[o](n))}return n};i.parse=function(t,e,i){if("string"!=typeof t&&(t=""),"string"==typeof e)try{e=JSON.parse(e)}catch(t){}return"object"!=typeof e&&(e={}),void 0===i&&(i=new RegExp(/{([a-zA-Z0-9\|]+)}/,"g")),t.replace(i,r.bind(e))};var n=4;if(void 0===window.eventToFire||void 0===window.eventToFire.version||window.eventToFire.version<n){var o=window.eventToFire||{};if(o.events=window.eventToFire&&window.eventToFire.events?window.eventToFire.events:{},o.version=n,o.registerEvent=function(t,e,i){return"string"==typeof t&&(("function"==typeof e||"string"==typeof e)&&(void 0===this.events[t]&&(this.events[t]=[]),this.events[t].push({func:e,staticArgs:i}),!0))},"function"!=typeof s)for(var a=[],s=function(){if("object"==typeof window.crypto&&"function"==typeof window.crypto.getRandomValues)var t=window.crypto.getRandomValues(new Uint32Array(4)),e=t[0],i=t[1],r=t[2],n=t[3];else e=4294967296*Math.random()>>>0,i=4294967296*Math.random()>>>0,r=4294967296*Math.random()>>>0,n=4294967296*Math.random()>>>0;return a[255&e]+a[e>>8&255]+a[e>>16&255]+a[e>>24&255]+"-"+a[255&i]+a[i>>8&255]+"-"+a[i>>16&15|64]+a[i>>24&255]+"-"+a[63&r|128]+a[r>>8&255]+"-"+a[r>>16&255]+a[r>>24&255]+a[255&n]+a[n>>8&255]+a[n>>16&255]+a[n>>24&255]},c=0;c<256;c++)a[c]=(c<16?"0":"")+c.toString(16);o.fireEvent=function(t){if("string"!=typeof t)return!1;var e=Object.keys(this.events).filter(function(e){var i=e.replace(/\./g,"\\.");return-1!==i.indexOf("*")&&(i=i.split("*")[0]+".*"),new RegExp("^"+i+"$").test(t)}).sort(function(e,i){return i===t?1:e===t?-1:i.replace("*","").length-e.replace("*","").length}),i=s();if(0===e.length)return!1;for(var r=0;r<e.length;r++)for(var n=0;n<this.events[e[r]].length;n++){var o=this.events[e[r]][n].func;if("string"==typeof o){if("function"!=typeof window[o])continue;o=window[o]}var a=[].slice.call(arguments,1);a.push(this.events[e[r]][n].staticArgs),o.apply({eventName:t,eventUID:i,eventHandler:e[r],eventToFire:this},a)}return!0},o.getAllEvent=function(){return this.events},window.eventToFire=o,window.registerEvent=function(t,e,i){window.eventToFire.registerEvent(t,e,i)},window.fireEvent=function(t,e){window.eventToFire.fireEvent(t,e)}}void 0===window.eventToFire.c2Caller&&(window.eventToFire.c2Caller=function(t,i,r){this.registerEvent(t,function(t){c2_callFunction(t,[].slice.call(arguments,1),e+":eventToFire")}.bind(this,i),r)});var h={version:"1.0.2",IntToBase:function(t,e){t=parseInt(t);var i=t<0;return t=Math.abs(t),e>9&&t<10?parseInt(t.toString(e))*(i?-1:1):(i?"-":"")+t.toString(e)},baseToInt:function(t,e){if(isNaN(t)){var i=void 0!==t[0]&&"-"===t[0];return parseInt(t.slice(i?1:0),e)*(i?-1:1)}return parseInt(t,e)}},u=function(){this.availableEngine={anonymous:{name:"anonymous",customInit:function(){},getAutoSeed:function(){return parseInt(233280*Math.random())},checkSeed:function(t){return"string"==typeof t&&(t=t.split("").reduce(function(t,e,i){return t+e.charCodeAt(0)*10**(3*i)},0)%233280),isNaN(t)?this.getAutoSeed():(t=Math.round(parseInt(t)),t>233280?t%233280:t)},getNextValue:function(){return(9301*this.value+49297)%233280},grow:function(t){for("number"==typeof t&&t%1==0||(t=1);t;)this.value=this.getNextValue(),t--,this.step++},random:function(t,e){return t=t||1,e=e||0,e+this.value/233280*(t-e)}},alea:{name:"alea",customInit:function(){this.m=new function(){var t=4022871197;return function(e){for(var i,r,n,o=0,a=.02519603282416938;o<e.length;o++)n=e.charCodeAt(o),i=a*(t+=n)-(t*a|0),t=4294967296*((r=i*(a*t|0))-(0|r))+(0|r);return 2.3283064365386963e-10*(0|t)}},this.a=this.m(" "),this.b=this.m(" "),this.c=this.m(" "),this.y=0,this.a-=this.m(this.initialValue),this.b-=this.m(this.initialValue),this.c-=this.m(this.initialValue),this.a<0&&this.a++,this.b<0&&this.b++,this.c<0&&this.c++},getAutoSeed:function(){return+new Date+Math.random()},checkSeed:function(t){return t+""},getNextValue:function(){var t=2.3283064365386963e-10*this.value+2091639*this.a,e=(this.b,this.c,0|t),i=t-e;return i},grow:function(t){for("number"==typeof t&&t%1==0||(t=1);t;)this.y=2.3283064365386963e-10*this.value+2091639*this.a,this.a=this.b,this.b=this.c,this.value=0|this.y,this.c=this.y-this.value,t--,this.step++},random:function(t,e){return t=t||1,e=e||0,e+this.c*(t-e)}}}};u.prototype.checkEngine=function(t){return"string"!=typeof t||"object"!=typeof this.availableEngine[t]?void 0!==p&&void 0!==p.DEFAULT_PRNG_ENGINE?p.DEFAULT_PRNG_ENGINE:"anonymous":t},u.prototype.init=function(t,e,i){return this.engine=this.checkEngine(i),this.initialValue=this.availableEngine[this.engine].checkSeed.apply(this,arguments),this.value="number"==typeof this.initialValue?this.initialValue:1,this.step=0,this.label="string"==typeof e?e:"",this.availableEngine[this.engine].customInit.apply(this,arguments),""!==this.label&&window.eventToFire.fireEvent("c2:seed_"+this.label+":init"),window.eventToFire.fireEvent("c2:seed:init",this),this},u.prototype.getAutoSeed=function(){return this.availableEngine[this.engine].getAutoSeed.apply(this,arguments)},u.prototype.grow=function(t){return"number"==typeof t&&t%1==0||(t=1),this.availableEngine[this.engine].grow.apply(this,arguments),""!==this.label&&window.eventToFire.fireEvent("c2:seed_"+this.label+":grow",t),window.eventToFire.fireEvent("c2:seed:grow",this,t),this},u.prototype.getNextValue=function(){return this.availableEngine[this.engine].getNextValue.apply(this,arguments)},u.prototype.random=function(t,e,i){"boolean"!=typeof i&&(i=!0),i&&this.grow();var r=this.availableEngine[this.engine].random.apply(this,arguments);return""!==this.label&&window.eventToFire.fireEvent("c2:seed_"+this.label+":random",r,t,e),window.eventToFire.fireEvent("c2:seed:random",this,r,t,e),r};var p={DEFAULT_SEED_NAME:"_defaultSeed",DEFAULT_PRNG_ENGINE:"anonymous",version:"1.1.1",seeds:{},plant:function(t,e,i){var r=(new u).init(e,t,i);return"string"==typeof t&&(this.seeds[t]=r,window.eventToFire.fireEvent("c2:seedsField:plant",t),window.eventToFire.fireEvent("c2:seedsField:plant_"+t)),r},uproot:function(t){return"string"==typeof t&&t!==this.DEFAULT_SEED_NAME&&void 0!==this.seeds[t]?(delete this.seeds[t],window.eventToFire.fireEvent("c2:seedsField:uproot",t),window.eventToFire.fireEvent("c2:seedsField:uproot_"+t),1):0}};p.unplant=p.uproot,p.getPlantedSeeds=function(t){var e=Object.keys(this.seeds);switch("string"!=typeof t&&(t="array"),t.toLowerCase()){case"string":return e.join(",");case"json":return JSON.stringify(e);default:return e}},p.getAvailableEngines=function(t){var e=Object.keys((new u).availableEngine);switch("string"!=typeof t&&(t="array"),t.toLowerCase()){case"string":return e.join(",");case"json":return JSON.stringify(e);default:return e}},p.getSeedStep=function(t,e){return void 0===e&&(e=!1),"string"!=typeof t&&(t=this.DEFAULT_SEED_NAME),void 0===this.seeds[t]?e:this.seeds[t].step},p.getSeedInitialValue=function(t,e){return void 0===e&&(e=!1),"string"!=typeof t&&(t=this.DEFAULT_SEED_NAME),void 0===this.seeds[t]?e:this.seeds[t].initialValue},p.getSeedCurrentValue=function(t,e){return void 0===e&&(e=!1),"string"!=typeof t&&(t=this.DEFAULT_SEED_NAME),void 0===this.seeds[t]?e:this.seeds[t].value},p.getSeedNextValue=function(t,e){return void 0===e&&(e=!1),"string"==typeof t&&""!==t||(t=this.DEFAULT_SEED_NAME),void 0===this.seeds[t]?e:this.seeds[t].getNextValue()},p.getPrediction=function(t,e,i,r){return void 0===t||void 0===this.seeds[t]?void 0!==r&&r:(new u).init(this.seeds[t].initialValue,void 0,this.seeds[t].engine).grow(this.seeds[t].step).random(e,i,r)},p.random=function(t,e,i,r,n){if(void 0===r&&(r=!1),"string"==typeof t&&""!==t||(t=this.DEFAULT_SEED_NAME),void 0===this.seeds[t])return r;var o=this.seeds[t].random(e,i,n);return o},p.getSeedRandomAt=function(t,e,i,r,n,o){return void 0===o&&(o=!1),"number"==typeof i&&i%1==0||(i=0),(new u).init(t,void 0,e).grow(i).random(r,n)},p.plant(p.DEFAULT_SEED_NAME,void 0,p.DEFAULT_PRNG_ENGINE);var v={version:"1.0.1",versionStrToNum:function(t){if(void 0===t)return 0;"string"!=typeof t&&(t+="");var e=t.split(".");if(e.length>3)return 0;for(;e.length<3;)e.push(0);return 1e6*e[0]+1e3*e[1]+1*e[2]},isVersionMin:function(t,e,i){"boolean"!=typeof i&&(i=!0);var r=this.versionStrToNum(t);switch(typeof e){case"undefined":e=1;break;case"string":e=this.versionStrToNum(e);break;case"number":break;default:return!1}return r>e||i&&r==e}},f=function(){};f.prototype.version="1.1.3",f.prototype.tag="W4F",f.prototype.array=[],f.prototype.arrayJs=[],f.prototype.id=0,f.prototype.init=function(){return this.C2_RUNTIME=cr_getC2Runtime(),this.C2_RUNTIME.tickMe(this),this},f.prototype.update=function(t){for(var e=0;e<this.array.length;e++)this.array[e].time-=t;for(e=0;e<this.arrayJs.length;e++)this.arrayJs[e].time-=t;this.checkArrayEndOfTime()},f.prototype.tick=function(){this.update(this.C2_RUNTIME.getDt())},f.prototype.toString=function(){return"arrayWaitForFunction"},f.prototype.waitForFunction=function(t,e,i,r){return i=Number(i)!=Number(i)||" "===i?i:Number(i),this.array.push({time:t,callback:e,param:i,id:this.id,persistentLevel:void 0===r?0:r}),this.id++},f.prototype.waitForFunctionJS=function(t,e,i,r){return this.arrayJs.push({time:t,callback:e,param:i,id:this.id,persistentLevel:void 0===r?0:r}),this.id++},f.prototype.checkArrayEndOfTime=function(){for(var t,i,r=0;r<this.array.length;r++)if(this.array[r].time<=0){t=this.array.splice(r,1)[0];break}if(void 0===t)for(r=0;r<this.arrayJs.length;r++)if(this.arrayJs[r].time<=0){i=this.arrayJs.splice(r,1)[0];break}void 0!==t&&(c2_callFunction(t.callback,[t.param],e+":"+this.__proto__.tag),this.checkArrayEndOfTime()),void 0!==i&&(i.callback(i.param),this.checkArrayEndOfTime())},f.prototype.clearArrayWait=function(t){t=void 0===t?0:t;for(var e=this.array.length-1;e>=0;e--)this.array[e].persistentLevel<=t&&this.array.splice(e,1)[0]},f.prototype.stopWaitById=function(t){for(var e=0;e<this.array.length;e++)if(this.array[e].id==t){this.array.splice(e,1);break}},f.prototype.getTimeUntilEndOf=function(t,e){void 0===e&&(e=-1);for(var i=0;i<this.array.length;i++)if(this.array[i].id==t)return this.array[i].time;return e},f.prototype.addTimeById=function(t,e){for(var i=0;i<this.array.length;i++)if(this.array[i].id==t)return this.array[i].time+=e,this.array[i].time;return-1},f.prototype.setTimeById=function(t,e){for(var i=0;i<this.array.length;i++)if(this.array[i].id==t)return this.array[i].time=e,this.array[i].time;return-1},f.prototype.startWaitNowById=function(t){for(var i,r=0;r<this.array.length;r++)if(this.array[r].id==t){i=this.array.splice(r,1)[0];break}void 0!==i&&c2_callFunction(i.callback,[i.param],e+":"+this.__proto__.tag)};var d=function(){};d.prototype.version="1.0.5",d.prototype.tag="NFSM",d.prototype.currentState="default",d.prototype.nextState="",d.prototype.setCurrentState=function(t){this.currentState=""+t,window.eventToFire.fireEvent("c2:nfsm:setCurrentState",t)},d.prototype.setNext=function(t){this.nextState=""+t,window.eventToFire.fireEvent("c2:nfsm:setNext",t)},d.prototype.next=function(t){if(null==t||""==t){if(null==this.nextState||""==this.nextState)return void console.error("no next state","next State is required")}else this.setNext(t);t=this.nextState;var i=c2_callFunction("beforeExit_"+this.currentState,[this.currentState,t,{current:this.currentState,nextState:t}],e+":"+this.__proto__.tag),r=c2_callFunction("beforeEnter_"+t,[this.currentState,t,{current:this.currentState,nextState:t,beforeExitResult:i}],e+":"+this.__proto__.tag);if(window.eventToFire.fireEvent("c2:nfsm:nextRequest",{current:this.currentState,beforeExit:i,beforeEnter:r}),0==i&&0==r){c2_callFunction("onExit_"+this.currentState,[this.currentState,t,{current:this.currentState,next:this.nextState}],e+":"+this.__proto__.tag);var n=this.currentState;this.currentState=t,this.nextState="",window.eventToFire.fireEvent("c2:nfsm:nextSucceed",{previous:this.previousState,current:this.currentState}),c2_callFunction("onEnter_"+this.currentState,[this.currentState,n,{current:this.currentState,previous:n}],e+":"+this.__proto__.tag)}else window.eventToFire.fireEvent("c2:nfsm:nextFailed",{current:this.currentState,rejected:t,next:this.nextState}),c2_callFunction("onFailExit_"+this.currentState,[this.currentState,t,i,r,{current:this.currentState,nextState:t,beforeExitActualState:i,beforeEnterNextState:r}],e+":"+this.__proto__.tag),c2_callFunction("onFailEnter_"+t,[this.currentState,t,i,r,{current:this.currentState,nextState:t,beforeExitActualState:i,beforeEnterNextState:r}],e+":"+this.__proto__.tag);window.eventToFire.fireEvent("c2:nfsm:next",t)};var y=function(){};y.prototype.saveKey="timeNotifier",y.prototype.version="1.0.5",y.prototype.tag="TN",y.prototype.state={ACTIVE:"active",PENDING:"pending",UNACTIVE:"unactive"},y.prototype.arrayNotif={},y.prototype.init=function(){this.load(),this.checkNotif()},y.prototype.getCompressedStr=function(t){var e={};for(var i in t)t.hasOwnProperty(i)&&(e[i]={},0!==t[i].count&&(e[i].c=t[i].count),e[i].s=h.IntToBase(t[i].timeStart,36),t[i].lastAck>-1&&(e[i].a=h.IntToBase(Math.max(0,t[i].timeStart-t[i].lastAck),36)),86400!==t[i].time&&(e[i].t=h.IntToBase(t[i].time,36)),t[i].timeEnd-1e3*t[i].time!==t[i].timeStart&&(e[i].d=h.IntToBase(Math.max(0,t[i].timeEnd-t[i].timeStart),36)),""!==t[i].message&&(e[i].m=t[i].message),t[i].state!==this.state.ACTIVE&&(e[i].e=t[i].state===this.state.UNACTIVE?0:1));return JSON.stringify(e)},y.prototype.getUnCompressedObj=function(t){var e={};if("object"==typeof t)i=t;else try{var i=JSON.parse(t)}catch(t){return e}for(var r in i)i.hasOwnProperty(r)&&(void 0===i[r].name?(e[r]={name:r},e[r].time=void 0===i[r].t?86400:h.baseToInt(i[r].t,36),e[r].state=void 0===i[r].e?this.state.ACTIVE:0==i[r].e?this.state.UNACTIVE:this.state.PENDING,e[r].message=void 0===i[r].m?"":i[r].m,e[r].timeStart=h.baseToInt(i[r].s,36),e[r].lastAck=void 0===i[r].a?-1:e[r].timeStart-h.baseToInt(i[r].a,36),e[r].timeEnd=void 0===i[r].d?e[r].timeStart+1e3*e[r].time:e[r].timeStart+h.baseToInt(i[r].d,36),e[r].count=void 0===i[r].c?0:i[r].c):e[r]=Object.assign({},i[r]));return e},y.prototype.load=function(){this.arrayNotif=this.getUnCompressedObj(c2_callFunction("readCustomData",[this.saveKey,"{}"],e+":"+this.__proto__.tag)),window.eventToFire.fireEvent("c2:timeNotifier:load")},y.prototype.save=function(){var t=0;for(var i in this.arrayNotif){t++;break}0!=t&&(c2_callFunction("writeCustomData",[this.saveKey,this.getCompressedStr(this.arrayNotif),""],e+":"+this.__proto__.tag),window.eventToFire.fireEvent("c2:timeNotifier:save"))},y.prototype.set=function(t,e,i,r,n,o){void 0===this.arrayNotif[t]&&(this.arrayNotif[t]={count:0,lastAck:-1}),this.arrayNotif[t].state=this.state.ACTIVE,this.arrayNotif[t].name=t,this.arrayNotif[t].time=e,this.arrayNotif[t].message=i,this.arrayNotif[t].timeStart=Date.now(),this.arrayNotif[t].timeEnd=Date.now()+1e3*e,this.save(),r&&window.eventToFire.fireEvent("c2:timeNotifier:onSetNotification",this.arrayNotif[t],n,o),window.eventToFire.fireEvent("c2:timeNotifier:set",t,e,i,r,n,o)},y.prototype.ack=function(t){void 0!==this.arrayNotif[t]&&this.arrayNotif[t].state==this.state.PENDING&&(this.arrayNotif[t].count++,this.arrayNotif[t].state=this.state.UNACTIVE,this.arrayNotif[t].lastAck=Date.now(),this.save(),window.eventToFire.fireEvent("c2:timeNotifier:ack",t))},y.prototype.cancel=function(t){return void 0!==this.arrayNotif[t]&&(this.arrayNotif[t].state=this.state.UNACTIVE,this.save(),window.eventToFire.fireEvent("c2:timeNotifier:cancel",t),!0)},y.prototype.get=function(t){return void 0===this.arrayNotif[t]?0:JSON.stringify(this.arrayNotif[t])},y.prototype.getValue=function(t,e,i){return void 0===i&&(i=-1),void 0===this.arrayNotif[t]||void 0===e||void 0===this.arrayNotif[t][e]?i:this.arrayNotif[t][e]},y.prototype.getAll=function(){return JSON.stringify(this.arrayNotif)},y.prototype.exist=function(t){return void 0!==this.arrayNotif[t]},y.prototype.checkNotifByName=function(t){void 0!==this.arrayNotif[t]&&this.arrayNotif[t].state!=this.state.UNACTIVE&&(Date.now()<this.arrayNotif[t].timeEnd||(this.arrayNotif[t].state=this.state.PENDING,c2_callFunction("timeNotifier_onNotification",[t,this.arrayNotif[t].eventMessage,JSON.stringify(this.arrayNotif[t])],e+":"+this.__proto__.tag),this.save(),window.eventToFire.fireEvent("c2:timeNotifier:onNotification",this.arrayNotif[t]),window.eventToFire.fireEvent("c2:timeNotifier:"+t,this.arrayNotif[t])))},y.prototype.checkNotif=function(){for(var t in this.arrayNotif)this.checkNotifByName(t)},y.prototype.getSecondBySpecificTime=function(t,e,i){var r=new Date;return r.setHours(t,e,i),r.getTime()-Date.now()<0&&r.setHours(t+24),r.getTime()},y.prototype.toHHMMSS=function(t){var e=parseInt(t,10),i=Math.floor(e/3600),r=Math.floor((e-3600*i)/60);t=e-3600*i-60*r;return i<10&&(i="0"+i),r<10&&(r="0"+r),t<10&&(t="0"+t),i+":"+r+":"+t},y.prototype.getState=function(t){return this.state[t]};var l=function(){this.capableToDisplayLeaderboard=!1};l.prototype.version="1.0.3",l.prototype.tag="LB",l.prototype.init=function(){window.eventToFire.registerEvent("leaderboard:onSubmitScoreSucceeded",function(t){c2_callFunction("leaderboard_onSubmitScoreSucceeded",[],e+":"+this.__proto__.tag)}),window.eventToFire.registerEvent("leaderboard:onSubmitScoreFailed",function(t){c2_callFunction("leaderboard_onSubmitScoreFailed",[],e+":"+this.__proto__.tag)});var t=this;window.eventToFire.registerEvent("leaderboard:ICanDisplayLeaderboard",function(e){"boolean"!=typeof e&&(e=!0),t.capableToDisplayLeaderboard=e}),window.eventToFire.fireEvent("c2:leaderboard:init")},l.prototype.canDisplayLeaderboard=function(){return this.capableToDisplayLeaderboard?1:0},l.prototype.submitScore=function(t,e){return e=parseInt(e),"string"!=typeof t||"number"!=typeof e||isNaN(e)?0:(window.eventToFire.fireEvent("c2:leaderboard:submitScore",t,e),1)},l.prototype.showLeaderboard=function(t,e){return"number"==typeof e&&(e=0!=e),"boolean"!=typeof e&&(e=!0),window.eventToFire.fireEvent("c2:leaderboard:showLeaderboard",t,e),1},l.prototype.showLeaderboards=function(){return window.eventToFire.fireEvent("c2:leaderboard:showLeaderboards"),1};var m=function(){};m.prototype.saveKey="achievement",m.prototype.version="1.1.2",m.prototype.tag="AC",m.prototype.state={HIDDEN:"HIDDEN",REVEALED:"REVEALED",UNLOCKED:"UNLOCKED"},m.prototype.type={STANDARD:"STANDARD",INCREMENTAL:"INCREMENTAL"},m.prototype.arrayAchievement={},m.prototype.init=function(){this.load();var t=function(t,i){c2_callFunction("achievement_onNotification",[t.achievement_code,i,t.currentStep,t.achievement_steps,JSON.stringify(t),t.previousStep],e+":"+this.__proto__.tag)};window.eventToFire.registerEvent("c2:achievement:unlock",t),window.eventToFire.registerEvent("c2:achievement:increment",t)},m.prototype.getCompressedStr=function(t){var e={};for(var i in t)t.hasOwnProperty(i)&&(e[i]={},t[i].currentStep>0&&t[i].achievement_state!==this.state.UNLOCKED&&(e[i].s=h.IntToBase(t[i].currentStep,36)),t[i].seen||(e[i].e=0),t[i].achievement_type===this.type.INCREMENTAL&&(e[i].m=h.IntToBase(t[i].achievement_steps,36)),t[i].achievement_state!==this.state.REVEALED&&(e[i].a=t[i].achievement_state===this.state.HIDDEN?0:1),"{}"===JSON.stringify(e[i])?delete e[i]:void 0===e[i].s&&void 0===e[i].e&&void 0===e[i].a&&void 0!==e[i].m&&delete e[i]);return JSON.stringify(e)},m.prototype.getUnCompressedObj=function(t){var e={};if("object"==typeof t)i=t;else try{var i=JSON.parse(t)}catch(t){return e}for(var r in i)i.hasOwnProperty(r)&&(void 0===i[r].achievement_code?(e[r]={achievement_code:r},e[r].seen=void 0===i[r].e,e[r].achievement_type=void 0===i[r].m?this.type.STANDARD:this.type.INCREMENTAL,e[r].achievement_steps=void 0===i[r].m?1:h.baseToInt(i[r].m,36),e[r].achievement_state=void 0===i[r].a?this.state.REVEALED:i[r].a>0?this.state.UNLOCKED:this.state.HIDDEN,e[r].currentStep=void 0!==i[r].s?h.baseToInt(i[r].s,36):e[r].achievement_state===this.state.UNLOCKED?e[r].achievement_steps:0):e[r]=Object.assign({},i[r]));return e},m.prototype.load=function(){this.arrayAchievement=this.getUnCompressedObj(c2_callFunction("readCustomData",[this.saveKey,"{}"],e+":"+this.__proto__.tag))},m.prototype.save=function(){var t=0;for(var i in this.arrayAchievement){t++;break}0!=t&&(c2_callFunction("writeCustomData",[this.saveKey,this.getCompressedStr(this.arrayAchievement),""],e+":"+this.__proto__.tag),window.eventToFire.fireEvent("c2:achievement:save"))},m.prototype.show=function(){window.eventToFire.fireEvent("c2:achievement:show")},m.prototype.register=function(t,e,i){if(void 0!==this.arrayAchievement[t])return window.eventToFire.fireEvent("c2:achievement:register",this.arrayAchievement[t]);i=i||{};"string"==typeof i&&(i=JSON.parse(i)),this.arrayAchievement[t]=(new g).create(t,e,i.achievement_state||this.state.REVEALED,i.achievement_type||(1==e?this.type.STANDARD:this.type.INCREMENTAL)),this.save(),window.eventToFire.fireEvent("c2:achievement:register",this.arrayAchievement[t])},m.prototype.unlock=function(t){if(this.arrayAchievement[t]){var e=this.arrayAchievement[t];e.achievement_type==this.type.STANDARD&&(e.currentStep>=e.achievement_steps||(e.previousStep=parseInt(e.currentStep),e.currentStep=e.achievement_steps,e.seen=!1,e.achievement_state=this.state.UNLOCKED,this.save(),window.eventToFire.fireEvent("c2:achievement:unlock",e,1)))}},m.prototype.increment=function(t,e){if(this.arrayAchievement[t]){var i=this.arrayAchievement[t];i.achievement_type==this.type.INCREMENTAL&&(i.currentStep>=i.achievement_steps||(i.previousStep=parseInt(i.currentStep),i.currentStep+=e,i.currentStep=Math.min(i.currentStep,i.achievement_steps),i.currentStep==i.achievement_steps&&(i.seen=!1,i.achievement_state=this.state.UNLOCKED),this.save(),window.eventToFire.fireEvent("c2:achievement:increment",i,e)))}},m.prototype.get=function(t,e){return void 0!==t&&void 0!==e?void 0===this.arrayAchievement[t]?-1:void 0===this.arrayAchievement[t][e]?-1:this.arrayAchievement[t][e]:void 0!==t?void 0===this.arrayAchievement[t]?-1:JSON.stringify(this.arrayAchievement[t]):JSON.stringify(this.arrayAchievement)},m.prototype.getUnSeen=function(){var t={};for(var e in this.arrayAchievement)this.arrayAchievement[e].seen||(t[e]=this.arrayAchievement[e]);return JSON.stringify(t)},m.prototype.getUnSeenCount=function(){var t=0;for(var e in this.arrayAchievement)this.arrayAchievement[e].seen||t++;return t},m.prototype.markAsSeenSpecific=function(t){this.arrayAchievement[t]&&(this.arrayAchievement[t].seen=!0,this.save(),window.eventToFire.fireEvent("c2:achievement:markAsSeen",this.arrayAchievement[t]))},m.prototype.markAsSeen=function(t){for(var e in this.arrayAchievement)this.markAsSeenSpecific(e)},m.prototype.reveal=function(t){this.arrayAchievement[t]&&(this.arrayAchievement[t].achievement_state=this.state.REVEALED,this.save(),window.eventToFire.fireEvent("c2:achievement:reveal",this.arrayAchievement[t]))};var g=function(){};g.prototype.create=function(t,e,i,r){return this.currentStep=0,this.seen=!0,this.achievement_code=t,this.achievement_type=r,this.achievement_steps=e,this.achievement_state=i,this};var E={version:"1.0.0",tag:"GN",date:function(){return new Date},regexp:function(t,e){return void 0===e&&(e=""),"string"==typeof t&&(t=t.replace(new RegExp("(^/)|(/$)","g"),"")),new RegExp(t,e)}},w={version:"1.0.0",tag:"RX",test:function(t,e,i){return void 0===e&&(e=""),"string"==typeof t&&(t=t.replace(new RegExp("(^/)|(/$)","g"),"")),new RegExp(t,e).test(i)?1:0}};"object"!=typeof window.playtouch&&(window.playtouch={}),playtouch.arrayWaitForFunction=(new f).init(),playtouch.leaderboard=new l,playtouch.nfsm=new d,playtouch.timeNotifier=new y,playtouch.achievement=new m,playtouch.versionChecker=v,playtouch.baseConverter=h,playtouch.seedsField=p,playtouch.textParser=i,playtouch.getNew=E,playtouch.regExp=w,playtouch.PLIBS_VERSION=t})();