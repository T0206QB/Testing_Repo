!function(){function i(i,t,s){return i.dist||(i.dist={}),i.dist[t.uid+"_"+s.uid]?i.dist[t.uid+"_"+s.uid]:i.dist[s.uid+"_"+t.uid]?i.dist[s.uid+"_"+t.uid]:i.dist[t.uid+"_"+s.uid]=e.distPos(t.pos,s.pos)}function t(t,s,r,u,o){u=void 0===u?t.config.maxDistance:u;let d=[];for(var n in r){let a=0;a=void 0===o?Math.abs(i(t,s,r[n])):Math.abs(e.distPos(e.sumPos(s.pos,o),r[n].pos)),a>u||(r[n].dist=a,d.push(r[n]))}return d.sort((function(i,t){return i.dist-t.dist}))}function s(i,s){var e=[];for(let r in i.filter.idGroupIsNotBase){let u=i.filter.idGroupIsNotBase[r],o=t(i,u,i.filter.isBaseIsNotOccupied,i.config.distOneShape,s);if(!(o.length>0))return!1;{let i=o[0];e.push([u.uid,i.uid])}}return c2_callFunction("compareShape_setShapeBaseId_array",[JSON.stringify(e)]),!0}window.compareShape=function(r){let u="string"==typeof r?JSON.parse(r):r;!function(i){for(var t in i.filter={},i.filter.idGroupIsNotBase={},i.filter.isBaseIsNotOccupied={},i.shape){let s=i.shape[t];s.x=Math.round(s.x),s.y=Math.round(s.y),s.pos=new e(s.x,s.y,s.uid),s.isBase&&(s.isOccupied||(i.filter.isBaseIsNotOccupied[t]=s)),s.idGroup==i.config.idGroup&&(s.isBase||(i.filter.idGroupIsNotBase[t]=s))}}(u);for(let t in u.filter.idGroupIsNotBase){let s=u.filter.idGroupIsNotBase[t],e=!1;for(let t in u.filter.isBaseIsNotOccupied){let r=u.filter.isBaseIsNotOccupied[t];if(s.uid!=r.uid&&Math.abs(i(u,s,r))<=u.config.maxDistance){e=!0;break}}if(!e)return!1}for(let i in u.filter.idGroupIsNotBase){let r=u.filter.idGroupIsNotBase[i],o=t(u,r,u.filter.isBaseIsNotOccupied);for(let i in o){let t=o[i];if(r.uid!=t.uid&&s(u,new e(t.x-r.x,t.y-r.y)))return!0}}return!1};class e{constructor(i,t,s){this.x=i,this.y=t,this.uid=void 0===s?-1:s}static equal(i,t){return i.x==t.x&&i.y==t.y}static sort(i,t){return i.x>t.x||i.y>t.y?1:-1}static sumPos(i,t){return new e(i.x+t.x,i.y+t.y)}static distPos(i,t){return cr.distanceTo(i.x,i.y,t.x,t.y)}isEqual(i){return this.constructor.equal(this,i)}getCopy(){return new e(this.x,this.y,this.uid)}setUid(i){return this.uid=i,this}}}();