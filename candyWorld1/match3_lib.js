!function(){var e="c2:libJewel:";class t{constructor(e,t,s){return this._id=++i.idU,this.uid=void 0,this.pos=new l(t,s),this.type="",this.item=void 0,this.isSpawn=!1,this.grid=e,this}create(){return delete this.grid.rulesCache.movePossible,window.eventToFire.fireEvent(e+"onCellCreated",this.id,this.logicX,this.logicY,this),this}get id(){return this.uid?this.uid:this._id}get x(){return this.pos.x}get y(){return this.pos.y}get logicX(){return this.pos.x}get logicY(){return this.pos.y}setItem(e,t=!0){if(this.item=e,this.item)return this.item.setCell(this,t),this}destroyItem(e){if(this.item)return this.item.destroy(e),this.item=void 0,this.updated(),this}setType(t){return this.type=t,delete this.grid.rulesCache.movePossible,window.eventToFire.fireEvent(e+"onCellTypeUpdated",this.id,this.logicX,this.logicY,this.type),this.updated(),this}updated(t=""){return delete this.grid.rulesCache.movePossible,window.eventToFire.fireEvent(e+"onCellUpdated",this.id,this.logicX,this.logicY,this.type,t,this),this}get info(){return{x:this.x,y:this.y,id:this.id,type:this.type}}static get idU(){return this._count?this._count:0}static set idU(e){this._count=e}}class i{constructor(e,t,s=-1,l=""){return this._id=++i.idU,this.uid=void 0,this.cell=e,this.type=l,this.color=s,this.grid=t,this}create(){return delete this.grid.rulesCache.movePossible,this.sendEvent("onItemCreated"),this}updated(){return delete this.grid.rulesCache.movePossible,this.sendEvent("onItemUpdated"),this}setCell(e,t=!0){return delete this.grid.rulesCache.movePossible,this.cell=e,t&&this.updated(),this}setType(e,t=!0){return delete this.grid.rulesCache.movePossible,this.type=e,t?(this.sendEvent("onItemTypeUpdated"),this.updated(),this):this}setColor(e){return this.color=e,this.sendEvent("onItemColorUpdated"),this.updated(),this}destroy(e){return e&&(this.destroyReason=e),this.sendEvent("onItemDestroy"),this}sendEvent(t){window.eventToFire.fireEvent(e+t,this.id,this.logicX,this.logicY,this.type,this.color,this)}get id(){return this.uid?this.uid:this._id}get logicX(){return this.cell?this.cell.logicX:-1}get logicY(){return this.cell?this.cell.logicY:-1}get x(){return this.cell?this.cell.logicX:-1}get y(){return this.cell?this.cell.logicY:-1}get info(){return{x:this.x,y:this.y,id:this.id,type:this.type,color:this.color}}static get idU(){return this._count?this._count:0}static set idU(e){this._count=e}}class s{constructor(e,t){this.rulesClass=t,this.rules=e,this.posCached={},this.posCached_match={},this.cache={}}getPosCreateItem(e,...t){return this.posCached[e.name]||(this.posCached[e.name]=e(...t)),this.posCached[e.name]}getPosMatchItem(e,...t){return this.posCached_match[e.name]||(this.posCached_match[e.name]=this.rulesClass.match_getPosibilities(e(...t))),this.posCached_match[e.name]}itemCanMatch(e,t){for(let i=0;i<this.rules.matchItems.length;i++){if("function"!=typeof this.rules.matchItems[i]){h("[CheckRules] matchItems rule is not a function",this.rules.matchItems[i]);continue}let s=this.rules.matchItems[i].call(this.rulesClass,e,t);if(s!==this.rulesClass.result_continue())return!!s}return!0}itemCanSwap(e,t,i){for(let s=0;s<this.rules.swapItems.length;s++){if("function"!=typeof this.rules.swapItems[s]){h("[CheckRules] swapItems rule is not a function",this.rules.swapItems[s]);continue}let l=this.rules.swapItems[s].call(this.rulesClass,e,t,i);if(l!==this.rulesClass.result_continue())return!!l}return!0}itemCanSwapMatch(e,t,i){for(let s=0;s<this.rules.swapItemsMatch.length;s++){if("function"!=typeof this.rules.swapItemsMatch[s]){h("[CheckRules] swapItems rule is not a function",this.rules.swapItems[s]);continue}let l=this.rules.swapItemsMatch[s].call(this.rulesClass,e,t,i);if(l!==this.rulesClass.result_continue())return!!l}return!0}lookForMatchGrid(e){let t=[];delete this.cache.checkMatchExist;for(let i=0;i<e.grid.length;i++)for(let s=0;s<e.grid[i].length;s++){if(!e.getCell(i,s).item)continue;let l=e.getCell(i,s);if(!this.itemCanMatch(l.item,l.item))continue;let h=this.lookForMatchCell(l,e);if(0!=h.length)for(let e=0;e<h.length;e++)t.push(h[e])}return t}lookForMatchCell(e,t){for(let i=0;i<this.rules.match.length;i++){if("function"!=typeof this.rules.match[i]){h("[CheckRules] match() rule is not a function",this.rules.match[i]);continue}let s=this.lookForMatchCellByRule(this.rules.match[i],e,t);if(s.length>0)return s}return[]}lookForMatchCellByRule(e,t,i){let s=this.getPosMatchItem(e),l=[];for(let h=0;h<s.length;h++){let r=[t],o=!0,n=this.lookForMatchCellByRule_getAllItemPos(i,t,s[h]);if(!(n.length<=0)){for(let e=0;e<n.length;e++){let i=n[e];if(!this.itemCanMatch(t.item,i.item)){o=!1;break}r.push(i)}o&&l.push({match:r,name:e.name})}}return l}lookForMatchCellByRule_getAllItemPos(e,t,i){let s=[];for(let h=0;h<i.length;h++){let r=e.getCellByPos(l.sumPos(t,i[h]));if(!r||!r.item)return[];s.push(r)}return s}lookForMatchCellByRule_isAlreadyCheck(e,t){this.cache.checkMatchExist||(this.cache.checkMatchExist={});let i=[e,...t].map((e=>e.pos.getCopy())).sort(l.sort),s=JSON.stringify(i);return!!this.cache.checkMatchExist[s]||(this.cache.checkMatchExist[s]=!0,!1)}itemCheckMoveGrid(e,t={},i=1){let s=!1;this.itemCheckAddItem(e);for(let i=0;i<this.rules.move.length;i++)if("function"==typeof this.rules.move[i]){for(let h=0;h<e.cellsSortTop.length;h++){let r=e.cellsSortTop[h].item;if(!r)continue;let o=new l(r.x,r.y),n=o;for(;o;)if(o=this.itemCheckMoveCellByRule(e,this.rules.move[i],r),0!=o){s=!0,t[r.id]||(t[r.id]=[n]),t[r.id].push(o);break}if(0!==i&&s)break}if(s)break}else h("[CheckRules] move() rule is not a function",this.rules.move[i]);return s&&this.itemCheckMoveGrid(e,t,i+1),t}itemCheckMoveCellByRule(t,i,s,r=!1){let o=i(t,s);o.hasOwnProperty("x")&&(o=[o]);for(let i=0;i<o.length;i++){let n=l.sumPos(o[i],s),c=t.getCellByPos(n);if(c)for(let t=0;t<this.rules.canMove.length;t++){if("function"!=typeof this.rules.canMove[t]){h("[CheckRules] canMove() rule is not a function",this.rules.canMove[t]);continue}let l=this.rules.canMove[t].call(this.rulesClass,s,c);if(l===this.rulesClass.result_handleTrue())return r||(window.eventToFire.fireEvent(e+"onBeforeItemMoved",s.id,c.x,c.y),s.cell.setItem(void 0),c.setItem(s),window.eventToFire.fireEvent(e+"onAfterItemMoved",s.id,c.x,c.y)),n;if(l===this.rulesClass.result_handleFalse()){if(i<o.length-1)break;return!1}}}return!1}itemCheckCanMove(e,t){let i=t.item;if(!i)return!1;for(let t=0;t<this.rules.move.length;t++){if("function"!=typeof this.rules.move[t]){h("[CheckRules] move() rule is not a function",this.rules.move[t]);continue}if(0!=this.itemCheckMoveCellByRule(e,this.rules.move[t],i,!0))return!0}return!1}itemCheckAddItem(t){let i=[],s=[];for(let e=0;e<this.rules.posCreateItem.length;e++){let s=this.getPosCreateItem(this.rules.posCreateItem[e],t.logicWidth,t.logicHeight,t.cells);for(let e=0;e<s.length;e++)i.push(s[e])}r(i);for(let e=0;e<i.length;e++)for(let l=0;l<this.rules.canCreateItem.length;l++)if(this.rules.canCreateItem[l](t.getCellByPos(i[e]))){let l=t.getCellByPos(i[e]);s.push(l);let h=this.rules.createItemOption();h.createdType="drop",this.rules.createItem(t,l,h)}return s.length>0&&window.eventToFire.fireEvent(e+"allItemCreated",JSON.stringify(i)),s}checkDestroyItem(e,t,i={match:[],name:""},s=this.rules.canDestroyItem,l=this.rules.canDestroyNoItem,r=void 0){for(let s=0;s<l.length;s++){if("function"!=typeof l[s]){h("[CheckRules] canDestroyNoItem rule is not a function",l[s]);continue}let r=l[s].call(this.rulesClass,e,t,i);if(r!==this.rulesClass.result_continue()&&r===this.rulesClass.result_handleFalse())break}for(let l=0;l<s.length;l++){if("function"!=typeof s[l]){h("[CheckRules] canDestroyItem rule is not a function",s[l]);continue}if(!e.item)return!1;let o=s[l].call(this.rulesClass,e,t,i,r);if(o!==this.rulesClass.result_continue()){if(o===this.rulesClass.result_handleFalse())break;return e.destroyItem(r),!0}}return!1}canTouch(e){for(let t=0;t<this.rules.canTouch.length;t++){if("function"!=typeof this.rules.canTouch[t]){h("[CheckRules] canTouch rule is not a function",this.rules.canTouch[t]);continue}let i=this.rules.canTouch[t].call(this.rulesClass,e);if(i!==this.rulesClass.result_continue())return!!i}return!0}}class l{constructor(e,t){this.x=e,this.y=t}static equal(e,t){return e.x==t.x&&e.y==t.y}static sort(e,t){return e.x>t.x||e.y>t.y?1:-1}static sumPos(e,t){return new l(e.x+t.x,e.y+t.y)}static distPos(e,t){return t.x-e.x+(t.y-e.y)}isEqual(e){return this.constructor.equal(this,e)}getCopy(){return new l(this.x,this.y)}}function h(e,...t){switch(window.playtouchGame.match3.logLevel){case 0:break;default:case 3:alert(e);case 2:console.error(e,t);break;case 1:console.log(e,t)}}function r(e){for(let t=e.length-1;t>0;t--){let i=Math.floor(Math.random()*(t+1));[e[t],e[i]]=[e[i],e[t]]}}void 0===window.playtouchGame&&(window.playtouchGame={}),void 0===window.playtouchGame.match3&&(window.playtouchGame.match3={}),window.playtouchGame.match3.logLevel=1,window.playtouchGame.match3.logMe=h,window.playtouchGame.match3.match3_lib_VERSION="1.0.4",window.playtouchGame.match3.Pos=l,window.playtouchGame.match3.Grid=class{constructor(){return this.rules={match:[],move:[],canMove:[],posCreateItem:[],canCreateItem:[],createItem:function(){},createItemOption:function(){return{}},matchItems:[],swapItems:[],swapItemsMatch:[],canTouch:[],canDestroyNoItem:[],canDestroyItem:[],sortCells:void 0,onlyOneMatch:!1},this.rulesCache={checkMove:{}},this}init(l,h,r=t,o=i,n=s,c=window.playtouchGame.match3.RulesClass){return this.cellClass=r,this.itemClass=o,this.logicWidth=l,this.logicHeight=h,this.rulesClass=c,this.checkRules=new n(this.rules,this.rulesClass),this.rules.createItem=this.rulesClass.createItemDefault,this.createArray(),window.eventToFire.fireEvent(e+"initEnd"),this}addRules(e,t){if("object"==typeof this.rules[e]){if("function"==typeof t)this.rules[e].push(t);else if("object"==typeof t)for(let i=0;i<t.length;i++)this.rules[e].push(t[i])}else this.rules[e]=t;return"sortCells"===e&&void 0!==this.rules[e]&&(this.cells=this.cells.sort(this.rules[e])),this}createArray(){this.grid=[],this.cells=[];for(let e=0;e<this.logicWidth;e++){this.grid.push([]);for(let t=0;t<this.logicHeight;t++){let i=new this.cellClass(this,e,t);this.grid[e].push(i),this.cells.push(i),i.create()}}this.cellsSortTop||(this.cellsSortTop=[...this.cells].sort(this.rulesClass.sortCells_top)),window.eventToFire.fireEvent(e+"onGridEnded")}ld_load(t,i){let s=[];for(let e=0;e<t.length;e++){let l=this.getCell(t[e].x,t[e].y);if(!l)continue;let h=void 0!==t[e].cells&&void 0!==t[e].cells.option?t[e].cells.option:{},r=void 0!==t[e].items&&void 0!==t[e].items.option?t[e].items.option:{};if(this.applyOption(l,h),""!==l.type&&l.setType(l.type),"void"!==l.type){if(["totem","virus","copyer","sinker","colorBomb","popper","blockLife"].includes(r.type)&&(r.color=-1),"switcher"==r.type){r.life=4;let e=[];for(let t=0;t<i;t++)r.color!=t&&e.push(t);r.switcherArrColor=[];let t=e.length;for(let i=0;i<t;i++)r.switcherArrColor.push(e.splice(Math.floor(Math.random()*e.length),1)[0]);r.color||(r.color=r.switcherArrColor.shift())}s.push({cell:l,optionItem:r})}}for(let e=0;e<this.cells.length;e++)"void"!==this.cells[e].type&&(this.cells[e].item||-1==s.findIndex((t=>t.cell.id==this.cells[e].id))&&s.push({cell:this.cells[e]}));window.eventToFire.fireEvent(e+"ld_load_beforeCreateItem"),s.forEach((e=>{this.itemCreateOnCell(e.cell,e.optionItem)}))}addUidOnItem(e,t){for(let i=0;i<this.cells.length;i++)if(this.cells[i].item&&this.cells[i].item._id==e)return void(this.cells[i].item.uid=t)}addUidOnCell(e,t){for(let i=0;i<this.cells.length;i++)if(this.cells[i]._id==e)return void(this.cells[i].uid=t)}getCell(e,t){if(!(e<0||t<0||e>=this.logicWidth||t>=this.logicHeight))return this.grid[e]&&this.grid[e][t]?this.grid[e][t]:void 0}getCellByPos(e){return this.getCell(e.x,e.y)}getCellById(e){for(let t=0;t<this.cells.length;t++)if(this.cells[t].id===e)return this.cells[t]}getRealWidth(){let e=1/0,t=0;for(var i=0;i<this.cells.length;i++){let s=this.cells[i];"void"!=s.type&&(s.x<=e&&(e=s.x),s.x>t&&(t=s.x))}return t-e+1}getRealHeight(){let e=1/0,t=0;for(var i=0;i<this.cells.length;i++){let s=this.cells[i];"void"!=s.type&&(s.y<=e&&(e=s.y),s.y>t&&(t=s.y))}return t-e+1}itemCreateOnCell(e,t={}){return e.item?(this.applyOption(e.item,t),e.item.updated(),e.item.id):this.rules.createItem(this,e,t)}itemCreateOnPos(e,t,i={}){for(let s=0;s<this.cells.length;s++)if(this.cells[s].x===e&&this.cells[s].y===t)return this.itemCreateOnCell(this.cells[s],i)}itemDestroyOnCell(e){e.destroyItem()}itemDestroyOnPos(e,t){for(let i=0;i<this.cells.length;i++)this.cells[i].x===e&&this.cells[i].y===t&&this.cells[i].destroyItem()}applyOption(e,t={}){if(e)for(var i in t)if(t.hasOwnProperty(i))try{e[i]=t[i]}catch(i){h("[applyOption] problem on add option",e,t,i)}}checkMove(t=!0){this.rulesCache.checkMove={};let i={};this.checkRules.itemCheckMoveGrid(this,i);return Object.keys(i||{}).length<=0&&window.eventToFire.fireEvent(e+"noItemMoved"),t?JSON.stringify(i):i}swapItem(t,i,s,l,h=!0,r=!1){let o=this.getCell(t,i),n=this.getCell(s,l);if(!o||!n)return!1;let c=o.item,a=n.item;return!(!c||!a)&&(!(!r&&(!this.checkRules.itemCanSwap(c,a,this)||h&&!this.checkRules.itemCanSwapMatch(c,a,this)))&&(r||window.eventToFire.fireEvent(e+"onBeforeItemSwapped",c.id,a.id),o.setItem(a,!r),n.setItem(c,!r),r||window.eventToFire.fireEvent(e+"onAfterItemSwapped",c.id,a.id),!0))}itemCanSwap(e,t,i,s){let l=this.getCell(e,t),h=this.getCell(i,s);if(!l||!h)return!1;let r=l.item,o=h.item;return!(!r||!o)&&!!this.checkRules.itemCanSwap(r,o,this)}swapItemByPos(e,t,i=!0,s=!1){return this.swapItem(e.x,e.y,t.x,t.y,i,s)}itemCanSwapByPos(e,t,i=!0,s=!1){return this.itemCanSwap(e.x,e.y,t.x,t.y)}checkMatch(t=!1,i=!0,s=!1){let h=this.sortMatchesByRule(this.checkRules.lookForMatchGrid(this));for(let e=0;e<h.length;e++)for(let t=0;t<h[e].match.length;t++){let i=h[e].match[t].pos.getCopy();h[e].match[t].item&&(i.id=h[e].match[t].item.id),h[e].match[t]=i}for(let e=0;e<h.length;e++)h[e].match=h[e].match.sort(l.sort);h=this.clearDuplicateMatch(h),h=this.clearContainedMatch(h);for(let l=0;l<h.length;l++)if(this.isStillACompleteMatch(h[l].match)){if(s||window.eventToFire.fireEvent(e+"onBeforeItemMatched",i?JSON.stringify(h[l]):h[l]),t)for(let e=0;e<h[l].match.length;e++){let t=this.getCellByPos(h[l].match[e]);t.item&&this.checkRules.checkDestroyItem(t,this,h[l])}if(s||window.eventToFire.fireEvent(e+"onItemMatched",i?JSON.stringify(h[l]):h[l]),this.rules.onlyOneMatch)break}return h.length<=0&&(s||window.eventToFire.fireEvent(e+"noItemMatched")),i?JSON.stringify(h):h}isStillACompleteMatch(e){for(let t=0;t<e.length;t++)if(!this.getCellByPos(e[t]).item||this.getCellByPos(e[t]).item.id!==e[t].id)return!1;return!0}sortMatchesByRule(e){let t=[];for(let i=0;i<this.rules.match.length;i++)for(let s=0;s<e.length;s++)e[s].name===this.rules.match[i].name&&t.push(e[s]);return t}clearDuplicateMatch(e){for(let t=0;t<e.length;t++)for(let i=e.length-1;i>=0;i--)t!=i&&e[t].name===e[i].name&&JSON.stringify(e[t].match)===JSON.stringify(e[i].match)&&e.splice(i,1);return e}clearContainedMatch(e){for(let t=0;t<e.length;t++)for(let i=e.length-1;i>=0;i--)t!=i&&e[i].match.every((i=>e[t].match.some((e=>l.equal(i,e)))))&&e.splice(i,1);return e}getValueOfItemById(e,t,i=""){for(let s=0;s<this.cells.length;s++){let l=this.cells[s].item;if(l&&l.id==e)return void 0===l[t]?i:l[t]}return i}getValueOfItemByPos(e,t,i,s=""){let l=this.grid[e][t].item;return l&&l[i]||s}getValueOfCellById(e,t,i=""){for(let s=0;s<this.cells.length;s++)if(this.cells[s].id==e)return this.getValueOfCellByPos(this.cells[s].x,this.cells[s].y,t,i);return i}getValueOfCellByPos(e,t,i,s=""){return this.grid[e][t]?void 0===this.grid[e][t][i]?s:this.grid[e][t][i]:s}movePossible(t=!1,i=!1,s=!1,h=0){let r=!1;var o=[new l(0,-1),new l(0,1),new l(-1,0),new l(1,0)],n=[];if(void 0===this.rulesCache.movePossible||i&&void 0===this.rulesCache.movePossible.matches){for(var c=0;c<this.cells.length;c++){let e=this.cells[c];if(this.cellAndItemExist(e)){for(var a=0;a<o.length;a++){let t=this.getCellByPos(l.sumPos(e,o[a]));if(!this.cellAndItemExist(t))continue;if(!this.itemCanSwapByPos(e.item,t.item))continue;let s=["line_h","line_v","bomb"];if("colorBomb"==e.item.type||"colorBomb"==t.item.type||s.includes(e.item.type)&&s.includes(t.item.type)){r=!0,i&&((n=[{name:"bonus",match:[]}])[0].match.push(e.pos.getCopy()),n[0].match[n[0].match.length-1].id=e.item.id,n[0].match.push(t.pos.getCopy()),n[0].match[n[0].match.length-1].id=t.item.id,n[0].dest={from:n[0].match[0],to:n[0].match[1]});break}this.swapItemByPos(e.item,t.item,!0,!0);let h=this.rules.onlyOneMatch;this.rules.onlyOneMatch=!0;let c=this.checkMatch(!1,!1,!0);if(this.rules.onlyOneMatch=h,this.swapItemByPos(e.item,t.item,!0,!0),!(c.length<=0)){i&&(n=this.movePossibleFetchMatchReturn(c,e,t)),r=!0;break}}if(r)break}}void 0===this.rulesCache.movePossible&&(this.rulesCache.movePossible={}),this.rulesCache.movePossible.matches=n,this.rulesCache.movePossible.ret=r}else n=this.rulesCache.movePossible.matches,r=this.rulesCache.movePossible.ret;if(!r&&t)s?(window.eventToFire.fireEvent(e+"requiredShuffle"),r=!1):r=this.shuffleGrid(h);else if(i)return JSON.stringify(n);return this.rulesCache.movePossible.ret=r,r}movePossibleFetchMatchReturn(e,t,i){let s=e;for(let e=0;e<s[0].match.length;e++){let h=!1;for(let r=0;r<2;r++){let o=(0==r?t.pos:i.pos).getCopy(),n=(0==r?i.pos:t.pos).getCopy();if(o.id=0==r?t.item.id:i.item.id,n.id=0==r?i.item.id:t.item.id,l.equal(o,s[0].match[e])){s[0].match[e]=n,s[0].dest={from:n,to:o},h=!0;break}}if(h)break}return s}shuffleGrid(t=0){let i=[],s=[];if(t>=10)return window.eventToFire.fireEvent(e+"noShufflePossible"),!1;if(t>=9){let t,s=[];for(let e=0;e<this.cells.length;e++){let t=this.cells[e];this.cellAndItemExist(t)&&(""!=t.type&&"bgLife"!=t.type&&"coat"!=t.type||"bomb"!=t.item.type&&"line"!=t.item.type&&"line_v"!=t.item.type&&"line_h"!=t.item.type&&"colorBomb"!=t.item.type||i.push(t))}for(let e=0;e<i.length;e++){let h=[new l(0,1),new l(1,0),new l(0,-1),new l(-1,0)];for(let r=0;r<h.length;r++){let o=this.getCellByPos(l.sumPos(i[e].pos,h[r]));if(this.cellAndItemExist(o)&&((""==o.type||"bgLife"==o.type||"coat"==o.type)&&""==o.item.type)){s.push(o.item),s.push(i[e].item),i.splice(e,1),t=o.item;break}}if(t)break}window.eventToFire.fireEvent(e+"startShuffle",JSON.stringify(s.map((e=>({pos:{x:e.x,y:e.y},id:e.id}))))),i.length<=0?t&&t.setType("bomb"):(t&&t.setType(i[0].item.type),i[0].item.setType(""))}else{for(let e=0;e<this.cells.length;e++){let t=this.cells[e];this.cellAndItemExist(t)&&(""!=t.type&&"bgLife"!=t.type&&"coat"!=t.type||""==t.item.type&&(i.push(t),s.push(t.item)))}window.eventToFire.fireEvent(e+"startShuffle",JSON.stringify(s.map((e=>({pos:{x:e.x,y:e.y},id:e.id}))))),r(i),r(s);let l=s.reduce((function(e,t){return e>t.color?e:t.color}))+1,h=2.5*l,o=0;for(let e=0;e<i.length;e++)for(i[e].setItem(s[e]);this.checkMatch(!1,!1,!0).length>0&&o++<h;)s[e].setColor(Math.floor(Math.random()*l));if(o>=h)return this.shuffleGrid(t+1)}return this.movePossible(!0,void 0,void 0,t+1)}cellAndItemExist(e){return!!e&&!!e.item}canTouch(e,t){let i=this.getCell(e,t);return!!i&&this.checkRules.canTouch(i)}canTouchByPos(e){return this.canTouch(e.x,e.y)}drawGrid(){let e="";e+="-----------------------------";for(let t=0;t<this.cellsSortTop.length;t++){t%this.logicWidth==0&&(0!=t&&(e+="|"),e+="\n|");let i=""+(this.cellsSortTop[t].item?this.cellsSortTop[t].item.color:" ");i=i.replace("-1","-"),e+=" "+i+" "}e+="|\n",e+="-----------------------------",console.log(e)}},window.playtouchGame.match3.Item=i,window.playtouchGame.match3.Cell=t}();